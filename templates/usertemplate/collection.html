{% extends 'usertemplate/base.html'%}
{% load static%}
{% block title %}{{len}} {% if len > 1 %}products{% else %}product{% endif %} found{% endblock %}
{% block content %}
{% if msg %}
{% for mess in msg %}
<div class="alert alert-{{mess.tags}}" role="alert">
    {{mess}}
</div>
{% endfor %}
{% endif %}
<style>
.fas {
    color:gold;
}

.rating{
    margin-left: 25px;
    }
</style>


<main id="content" role="main">
            <!-- breadcrumb -->
            <div class="bg-gray-13 bg-md-transparent">
                <div class="container">
                    <!-- breadcrumb -->
                    <div class="my-md-3">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mb-3 flex-nowrap flex-xl-wrap overflow-auto overflow-xl-visble">
                                <li class="breadcrumb-item flex-shrink-0 flex-xl-shrink-1"><a href="/">Home<a></li>{{categories.name}}
                                <li class="breadcrumb-item flex-shrink-0 flex-xl-shrink-1 active" aria-current="page">{%if categories%}{{categories.name}}{% else %}Product Collection{%endif%}</li>
                            </ol>
                        </nav>
                    </div>
                    <!-- End breadcrumb -->
                </div>
            </div>

            
            <!-- End breadcrumb -->
            <div class="container">
                <!-- Single Product Body -->
            <!-- End breadcrumb -->

            <div class="container">
                <div class="row mb-8">
                    <div class="d-none d-xl-block col-xl-3 col-wd-2gdot5">
                        <!-- <div class="mb-8 border border-width-2 border-color-3 borders-radius-6"> -->
                            <!-- List -->
                            <!-- <ul id="sidebarNav" class="list-unstyled mb-0 sidebar-navbar">
                                <li>
                                    <a class="dropdown-toggle dropdown-toggle-collapse dropdown-title" href="javascript:;" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="sidebarNav1Collapse" data-target="#sidebarNav1Collapse">
                                        Show All Categories
                                    </a>

                                    <div id="sidebarNav1Collapse" class="collapse" data-parent="#sidebarNav">
                                        <ul id="sidebarNav1" class="list-unstyled dropdown-list"> -->
                                            <!-- Menu List -->
                                            <!-- {% for cate in categories %}   -->
                                            <!-- <li><a class="dropdown-item" href="/search2/?key=&category={{cate.id}}">{{cate.name}}<span class="text-gray-25 font-size-12 font-weight-normal"> </span></a></li> -->
                                            <!-- {%endfor%} -->
                                            
                                            <!-- End Menu List -->
                                        <!-- </ul> -->
                                    <!-- </div> -->
                                <!-- </li> -->
                               
                            <!-- </ul> -->
                            <!-- End List -->
                        <!-- </div> -->
                        <div class="mb-6">
                            <div class="border-bottom border-color-1 mb-5">
                                <h3 class="section-title section-title__sm mb-0 pb-2 font-size-18">Filters</h3>
                            </div>

                            
                         
                            <div class="range-slider">
                                <h4 class="font-size-14 mb-3 font-weight-bold">Price</h4>

                                <div>
                                    <form method="post" action="/search2/">
                                        {% csrf_token %}
                                        {%if category_obj%}
                                          <input type="hidden" name="category" value={{category_obj.id}}>
                                        {%endif%}
                                          {%if sub_cat%}
                                          <input type="hidden" name="sub_cat" value="{{sub_cat}}">
                                          {%endif%}
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6">
                                        <div class="form-group">
                                            <input type="number" id="min_price" required class="form-control" placeholder="Min. Price" name="min_price">
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                        <div class="form-group">
                                            <input type="number" id="max_price" required class="form-control" placeholder="Max. Price" name="max_price">
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-6">
                                        <div  class="form-group">
                                            <input type="checkbox" id="in_stock" value="True"  placeholder="In Stock" name="in_stock">
                                            <label style="font-weight: bold;" >In Stock</label>
                                        </div>
                                    </div>
                                        <button type="submit" class="btn px-4 btn-primary-dark-w py-2 rounded-lg text-light">Filter</button>
                                    </div>
                                    </form>
                                </div>
                                <!-- Range Slider -->
                               </div>
                                <br>
                        </div>
                        <div class="border-bottom border-color-1 mb-5">
                            <h3 class="section-title section-title__sm mb-0 pb-2 font-size-18">Brand Filter</h3>
                        </div>
                        <div class="mb-8 border border-width-2 border-color-3 borders-radius-6">
                            <!-- List -->
                            
                            <ul id="sidebarNav" class="list-unstyled mb-0 sidebar-navbar">
                                <li>
                                    <a class="dropdown-toggle dropdown-toggle-collapse dropdown-title" href="javascript:;" role="button" data-toggle="collapse" aria-expanded="false" aria-controls="sidebarNav1Collapse2" data-target="#sidebarNav1Collapse2">
                                        Select Brands
                                    </a>

                                    <div id="sidebarNav1Collapse2" class="collapse" data-parent="#sidebarNav">
                                        <ul id="sidebarNav1" class="list-unstyled dropdown-list">
                                            <!-- Menu List -->
                                            {% for i in brand %}  
                                            <li><a class="dropdown-item" href="/search2/?key=&category=&brand={{i.id}}">{{i.name}}<span class="text-gray-25 font-size-12 font-weight-normal"> </span></a></li>
                                            {%endfor%}
                                            
                                            <!-- End Menu List -->
                                        </ul>
                                    </div>
                                </li>
                               
                            </ul>
                            <!-- End List -->
                        </div> 
                       
<!--Rating filter-->
<div class="mb-6">
    <div class="border-bottom border-color-1 mb-5">
        <h3 class="section-title section-title__sm mb-0 pb-2 font-size-18">Rating Filter</h3>
    </div>

    
 
    <div class="range-slider">

        <div>
            <form method="post" action="/search2/">
                {% csrf_token %}
                {%if category_obj%}
                  <input type="hidden" name="category" value={{category_obj.id}}>
                {%endif%}
                  {%if sub_cat%}
                  <input type="hidden" name="sub_cat" value="{{sub_cat}}">
                  {%endif%}
                <div style="display: flex;" class="row">
                    <div style="display: flex;flex-direction: column;" class="form-group d-flex align-items-center justify-content-between mb-2 pb-1">
                        <div class="custom-control custom-checkbox">
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                           <input class="rating" type="radio" value="5.0" name="rate"  >
                        </div>
                        <div class="custom-control custom-checkbox">
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star text-muted"></small>
                           <input class="rating" type="radio" value="4.0" name="rate"  >
                        </div>
                        <div class="custom-control custom-checkbox">
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star text-muted"></small>
                            <small class="fas fa-star text-muted"></small>
                           <input class="rating" type="radio" value="3.0" name="rate"  >
                        </div>
                        <div class="custom-control custom-checkbox">
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star text-muted"></small>
                            <small class="fas fa-star text-muted"></small>
                            <small class="fas fa-star text-muted"></small>
                           <input class="rating" type="radio" value="2.0" name="rate"  >
                        </div>
                        <div class="custom-control custom-checkbox">
                            <input type="checkbox" value="5" name="five" class="custom-control-input" id="brandAdidas">
                            <small class="fas fa-star "></small>
                            <small class="fas fa-star text-muted"></small>
                            <small class="fas fa-star text-muted"></small>
                            <small class="fas fa-star text-muted"></small>
                            <small class="fas fa-star text-muted"></small>
                           <input class="rating" type="radio" value="1.0" name="rate"  >
                        </div>
                    </div>
                
            </div>
            <div>
                <button type="submit" class="btn px-4 btn-primary-dark-w py-2 rounded-lg text-light">Filter rating</button>
            </div>
            </form>
        </div>
        <!-- Range Slider -->
       </div>
        <br>
</div>


                        <div class="mb-8">
                            <div class="border-bottom border-color-1 mb-5">
                                <h3 class="section-title section-title__sm mb-0 pb-2 font-size-18">Latest Products</h3>
                            </div>
                            <ul class="list-unstyled">
                                {% for i in latest|slice:"8"%}
                                <li class="mb-4">
                                    <div class="row">
                                        <div class="col-auto">
                                            <a href="/productdetail/?p={{i.product.id}}" class="d-block width-75">
                                                <img class="img-fluid" src="{{i.image.url}}" alt="Image Description">
                                            </a>
                                        </div>
                                        <div class="col">
                                            <h3 class="text-lh-1dot2 font-size-14 mb-0"><a href="/productdetail/?p={{i.product.id}}">{{i.product.name}}</a></h3>
                                            <!-- <div class="text-warning text-ls-n2 font-size-16 mb-1" style="width: 80px;">
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                
                                                <small class="fas fa-star "></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                
                                                <small class="fas fa-star "></small>
                                                <small class="fas fa-star "></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star text-muted"></small>
                                                
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                                <small class="fas fa-star"></small>
                                            </div> -->
                                            <div class="font-weight-bold">
                                                {%if request.method.is_retailer%}
                                                <del class="font-size-11 text-gray-9 d-block">₹{{i.price|floatformat:2}}</del>
                                                <ins class="font-size-15 text-red text-decoration-none d-block">₹{{i.amount_to_pay_retailer|floatformat:2}}</ins>
                                                {%else%}
                                                <del class="font-size-11 text-gray-9 d-block">₹{{i.product.mrp|floatformat:2}}</del>
                                                <ins class="font-size-15 text-red text-decoration-none d-block">₹{{i.product.price|floatformat:2}}</ins>

                                                {%endif%}
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                {%endfor%}
                      
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-9 col-wd-9gdot5">
                        <!-- Shop-control-bar Title -->
                        <div class="d-block d-md-flex flex-center-between mb-3">
                            <h3 class="font-size-25 mb-2 mb-md-0">{{category_obj.category}}</h3>
                            <!-- <p class="font-size-14 text-gray-90 mb-0">Showing 1–25 of 56 results</p> -->
                        </div>
                        <!-- End shop-control-bar Title -->
                        <!-- Shop-control-bar -->
                        <div class="bg-gray-1 flex-center-between borders-radius-9 py-1">
                            <div class="d-xl-none">
                                <!-- Account Sidebar Toggle Button -->
                                <a id="sidebarNavToggler1" class="btn btn-sm py-1 font-weight-normal target-of-invoker-has-unfolds" href="javascript:;" role="button" aria-controls="sidebarContent1" aria-haspopup="true" aria-expanded="false" data-unfold-event="click" data-unfold-hide-on-scroll="false" data-unfold-target="#sidebarContent1" data-unfold-type="css-animation" data-unfold-animation-in="fadeInLeft" data-unfold-animation-out="fadeOutLeft" data-unfold-duration="500">
                                    <i class="fas fa-sliders-h"></i> <span class="ml-1">Filters</span>
                                </a>
                                <!-- End Account Sidebar Toggle Button -->
                            </div>
                            <div class="px-3 d-none d-xl-block">
                                <ul class="nav nav-tab-shop" id="pills-tab" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="pills-one-example1-tab" data-toggle="pill" href="#pills-one-example1" role="tab" aria-controls="pills-one-example1" aria-selected="true">
                                            <div class="d-md-flex justify-content-md-center align-items-md-center">
                                                <i class="fa fa-th"></i>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="pills-two-example1-tab" data-toggle="pill" href="#pills-two-example1" role="tab" aria-controls="pills-two-example1" aria-selected="false">
                                            <div class="d-md-flex justify-content-md-center align-items-md-center">
                                                <i class="fa fa-align-justify"></i>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="pills-three-example1-tab" data-toggle="pill" href="#pills-three-example1" role="tab" aria-controls="pills-three-example1" aria-selected="false">
                                            <div class="d-md-flex justify-content-md-center align-items-md-center">
                                                <i class="fa fa-list"></i>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="d-flex">
                                <form method="get">
                                    <!-- Select -->
                                    
                                    <!-- End Select -->
                                </form>
                                <form method="POST" class="ml-2 d-none d-xl-block">
                                    <!-- Select -->
                                 
                                    <!-- End Select -->
                                </form>
                            </div>
                            <nav class="px-3 flex-horizontal-center text-gray-20 d-none d-xl-flex">
                                {% if data.has_previous %}
                                <a class="text-gray-30 font-size-20 ml-2" href="/search2/?key={{key}}&category={{category}}&page={{ data.previous_page_number }}">←</a>
                                {% endif %}
                                <!-- <form method="post" class="min-width-50 mr-1"> -->
                                    {% csrf_token %}
                                    
                                    <a size="{{paginator.num_pages}}" min="1" max="{{paginator.num_pages}}" name="page" type="number"  value="">{{data.number}} of {{paginator.num_pages}}</a>
                                    
                                <!-- </form> -->
                                
                                {% if data.has_next %}
                                <a class="text-gray-30 font-size-20 ml-2" href="/search2/?key={{key}}&category={{category}}&page={{ data.next_page_number }}">→</a>
                                {% endif %}
                            </nav>
                            
                        </div>
                        <!-- End Shop-control-bar -->
                        <!-- Shop Body -->
                        <!-- Tab Content -->
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade pt-2 active show" id="pills-one-example1" role="tabpanel" aria-labelledby="pills-one-example1-tab" data-target-group="groups">
                                <ul class="row list-unstyled products-group no-gutters">
                                    {% for product in data %}
                                    <li class="col-6 col-md-3 col-wd-2gdot4 product-item ">
                                        <div class="product-item__outer h-100">
                                            <div  style="border-radius: 0;" class="product-item__inner px-xl-4 p-3 cart_product">
                                                <input type="hidden" value="{{product.product.id|safe}}" id="product">
                                                <div class="product-item__body pb-xl-2">
                                                    <div class="mb-2"><a href="/search2/?key=&category={{product.product.category.id}}" class="font-size-12 text-gray-5">{{product.product.category.name}}</a></div>
                                                    <div class="mb-2"><a href="/search2/?key=&category={{product.product.category.id}}" class="font-size-12 text-gray-5">Store Name: {{product.product.store.name}}</a></div>
                                                    <h5 class="mb-1 product-item__title"><a href="/productdetail/?p={{product.product.id}}">{{product.product.name}}</a></h5>
                                                    <div class="mb-2">
                                                        <a href="/productdetail/?p={{product.product.id}}" class="d-block text-center"><img class="img-fluid" src="{{product.image.image.url}}" alt="Image Description"></a>
                                                    </div>
                                                    <div class="flex-center-between mb-1">
                                                        <div class="prodcut-price">
                                                            <span ><i class="fa fa-inr"></i>{{product.product.price}}</span>
                                                        </div><br>
                                                    </div>
                                                    
                                                    <div class="flex-center-between mb-1">
                                                        <div class="prodcut-price">
                                                            <div style="text-decoration: line-through;" class="text-gray-50">₹{{product.fake_price}}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <input hidden type="number" name="ec_qtybtn" min="1" onchange="update_item('{{prod.id}}')" max="{{ product.stock|safe }}"
                                                    value="1" id="quantity" />
                                                <div class="product-item__footer">
                                                    <div class="border-top pt-2 flex-center-between flex-wrap">
                                                        <span class="badge badge-warning" style="font-size:15px;">{{product.pv}} PV</span>
                                                        {% if product.rating > 3.5 %}
                                                        <span class="badge badge-success" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                        {% endif %}
                                                        {% if product.rating <= 3.5 and product.rating > 2.5 %}
                                                        <span class="badge badge-info" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                        {% endif %}
                                                        {% if product.rating <= 2.5 %}
                                                        <span class="badge badge-danger" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                        {% endif %}
                                                        <br>
                                                        <div  class="d-none d-xl-block prodcut-add-cart">
                                                            <button type="button" class="button-input btn-add-cart btn-primary transition-3d-hover"><i class="ec ec-add-to-cart"></i></button>
                                                            <!-- <a onclick="add_to_cart();" class="btn-add-cart btn-primary transition-3d-hover"><i class="ec ec-add-to-cart"></i></a> -->
                                                        </div>
                                                        <a href="/productdetail/?p={{product.product.id}}" tabindex="0">See Product Details</a>
                                                        <div class="modal p-4" id="added-cart"
                                                        style="width:100%;height:100%;background-color:rgba(13, 1, 0, 0.5);text-align:center;color:white;z-index:1000">
                                                        <h3 id="added-cart-text" style="color:white;"><i class="fa fa-check"></i> Added to Cart
                                                        </h3>
                                                    </div>
                                                    
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    {%endfor%}
                    
                    
                                </ul>
                            </div>
                            <div class="tab-pane fade pt-2" id="pills-two-example1" role="tabpanel" aria-labelledby="pills-two-example1-tab" data-target-group="groups">
                                <ul class="row list-unstyled products-group no-gutters">
                                    {% for product in data %}
                                    <li class="col-6 col-md-3 col-wd-2gdot4 product-item">
                                        <div class="product-item__outer h-100">
                                            <div class="product-item__inner px-xl-4 p-3">
                                                <div class="product-item__body pb-xl-2">
                                                    <div class="mb-2"><a href="/collection/{{prod.main_category.id}}">{{product.product.category.name}}</a></div>
                                                    <h5 class="mb-1 product-item__title"><a href="/single_product/{{prod.id}}">{{product.product.name}}</a></h5>
                                                    <div class="mb-2">
                                                        <a href="/single_product/{{prod.id}}" class="d-block text-center"><img class="img-fluid" src="{{product.image.image.url}}" alt="Image Description"></a>
                                                    </div>
                                                    <div class="mb-3">
                                                        <a class="d-inline-flex align-items-center small font-size-14" href="/all_rating/{{prod.id}}">
                                                            <div class="product-item__footer">
                                                                <div class="border-top pt-2 flex-center-between flex-wrap">
                                                                    
                                                                    {% if product.rating > 3.5 %}
                                                                    <span class="badge badge-success" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                                    {% endif %}
                                                                    {% if product.rating <= 3.5 and product.rating > 2.5 %}
                                                                    <span class="badge badge-info" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                                    {% endif %}
                                                                    {% if product.rating <= 2.5 %}
                                                                    <span class="badge badge-danger" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                                    {% endif %}
                                                                    <br>
                                                                    
                                                                </div>
                                                            </div>
                                                            <span class="text-secondary">{{prod.no_of_rating}}</span>
                                                        </a>
                                                    </div>
                                                    <ul class="font-size-12 p-0 text-gray-110 mb-4">
                                                        <li class="line-clamp-1 mb-1 list-bullet"><strong>Brand: </strong>{{product.product.brand.name}}</li>
                                                        <li class="line-clamp-1 mb-1 list-bullet"><strong>Size: </strong>{{prod.weight}}</li>
                                                        
                                                    </ul>
                                                    <input hidden type="number" name="ec_qtybtn" min="1" onchange="update_item('{{prod.id}}')" max="{{ product.stock|safe }}"
                                                    value="1" id="quantity" />
                                                    <!-- <div class="text-gray-20 mb-2 font-size-12">Brand: {{product.product.brand.name}}</div> -->
                                                    <div class="flex-center-between mb-1">
                                                        <div class="prodcut-price">
                                                            <span class="badge badge-warning" style="font-size:15px;">{{product.pv}} PV</span>
                                                            {% if request.user.is_retailer%}
                                                            <div class="text-gray-50"><del>₹{{product.product.mrp}}</del></div>
                                                            <div class="text-gray-100">{{product.product.price}}</div>
                                                            {%else%}
                                                            <div class="text-gray-50" ><del>₹{{product.product.mrp}}</del></div>
                                                            <div class="text-gray-100">{{product.product.price}}</div>
                                                            {%endif%}
                                                        </div>
                                                        
                                                    </div>
                                                </div>
                                                <div class="product-item__footer">
                                                    <div class="border-top pt-2 flex-center-between flex-wrap">
                                                       
                                                        {%if request.session.store_id%}
                                                        <a href="/addtowish/{{prod.id}}" class="text-gray-6 font-size-13"><i class="ec ec-favorites mr-1 font-size-15"></i> Wishlist</a>
                                                        {%else%}
                                                        <div   class="d-none d-xl-block prodcut-add-cart">
                                                            <a onclick="add_to_cart();" class="btn-add-cart btn-primary transition-3d-hover"><i class="ec ec-add-to-cart"></i></a>
                                                        </div>
                                                         <a href="/productdetail/?p={{product.product.id}}" tabindex="0">See Product Details</a>
                                                        {%endif%}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    {%endfor%}
                              
                         
                                </ul>
                            </div>
                            <div class="tab-pane fade pt-2" id="pills-three-example1" role="tabpanel" aria-labelledby="pills-three-example1-tab" data-target-group="groups">
                                <ul class="d-block list-unstyled products-group prodcut-list-view">
                                    {% for product in data %}
                                    <li class="product-item remove-divider">
                                        <div class="product-item__outer w-100">
                                            <div class="product-item__inner remove-prodcut-hover py-4 row">
                                                <div class="product-item__header col-6 col-md-4">
                                                    <div class="mb-2">
                                                        <a href="../shop/single-product-fullwidth.html" class="d-block text-center"><img class="img-fluid" src="{{product.image.image.url}}" alt="Image Description"></a>
                                                    </div>
                                                </div>
                                                <div class="product-item__body col-6 col-md-5">
                                                    <div class="pr-lg-10">
                                                        <div class="mb-2"><a href="/collection/{{prod.main_category.id}}" class="font-size-12 text-gray-5">{{product.product.category.name}}</a></div>
                                                        <h5 class="mb-2 product-item__title"><a href="/single_product/{{prod.id}}" class="text-blue font-weight-bold">{{product.product.name}}</a></h5>
                                                        <div class="prodcut-price mb-2 d-md-none">
                                                            <div class="text-gray-100">$685,00</div>
                                                        </div>
                                                        <div class="mb-3 d-none d-md-block">
                                                            <a class="d-inline-flex align-items-center small font-size-14" href="#">
                                                                <div class="text-warning mr-2">
                                                                    {% if product.rating > 3.5 %}
                                                                    <span class="badge badge-success" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                                    {% endif %}
                                                                    {% if product.rating <= 3.5 and product.rating > 2.5 %}
                                                                    <span class="badge badge-info" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                                    {% endif %}
                                                                    {% if product.rating <= 2.5 %}
                                                                    <span class="badge badge-danger" style="font-size:15px;">{{product.rating}} <i class="fa fa-star"></i></span>
                                                                    {% endif %}
                                                                    <!-- <small class="fas fa-star"></small>
                                                                    <small class="fas fa-star"></small>
                                                                    <small class="fas fa-star"></small>
                                                                    <small class="fas fa-star"></small>
                                                                    <small class="far fa-star text-muted"></small> -->
                                                                </div>
                                                            </a>
                                                        </div>
                                                        <ul class="font-size-12 p-0 text-gray-340 mb-4 d-none d-md-block">
                                                            <span style="overflow-x: hidden;width: 200px;" class="main-text" maxlength="40" >{{ produt.product.description|safe}}</span>
                                                            <!-- <li class="line-clamp-1 mb-1 list-bullet">Made of supreme quality, durable EVA crush resistant, anti-shock material.</li>
                                                            <li class="line-clamp-1 mb-1 list-bullet">20 MP Electro and 28 megapixel CMOS rear camera</li> -->
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="product-item__footer col-md-3 d-md-block">
                                                    <div class="mb-3">
                                                        <div class="prodcut-price mb-2">
                                                            <div class="text-gray-50" ><del>₹{{product.product.mrp}}</del></div>
                                                            <div class="text-gray-100">{{product.product.price}}</div>
                                                        </div>
                                                        <div class="prodcut-add-cart">
                                                            <a href="../shop/single-product-fullwidth.html" class="btn btn-sm btn-block btn-primary-dark btn-wide transition-3d-hover">Add to cart</a>
                                                        </div>
                                                    </div>
                                                    <div class="flex-horizontal-center justify-content-between justify-content-wd-center flex-wrap">
                                                        <a href="../shop/compare.html" class="text-gray-6 font-size-13 mx-wd-3"><i class="ec ec-compare mr-1 font-size-15"></i> Compare</a>
                                                        <a href="../shop/wishlist.html" class="text-gray-6 font-size-13 mx-wd-3"><i class="ec ec-favorites mr-1 font-size-15"></i> Wishlist</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    {% endfor %}
                                    </ul>
                                    </div>
                        </div>
                        <!-- End Tab Content -->
                        <!-- End Shop Body -->
                        <!-- Shop Pagination -->
                        <nav class="d-md-flex justify-content-between align-items-center border-top pt-3" aria-label="Page navigation example">
                            <div class="text-center text-md-left mb-3 mb-md-0"></div>
                            <ul class="pagination mb-0 pagination-shop justify-content-center justify-content-md-start">
                                <!-- <li class="page-item"><a class="page-link current" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li> -->

                                <div class="pagination">
                                    <span class="step-links">
                                       
                                    <!--Product show -->




                                    <div class="shop">
                                        <div class="container">
                                            <div class="row">
                                               
                            
                                                <div class="col-lg-9">
                                                    <div class="shop_content">
                                                        <div class="shop_bar clearfix">
                                                            <div class="shop_product_count"><span>{{len}}</span> {% if len > 1 %}products{% else %}product{% endif %} found</div>
                                                        </div>
                                           
                                                        <div class="product_grid">
                                                            <div class="product_grid_border"></div>
                                                            
                                                            <!-- Product Item -->
                                                            <div class="product_item is_new"> <div class="product_item discount">
                            
                                                        </div>
                            
                                                        <!-- Shop Page Navigation -->
                                                    
                                                        <div class="shop_page_nav d-flex flex-row">
                                                            <!-- <div class="page_prev d-flex flex-column align-items-center justify-content-center"><i class="fas fa-chevron-left"></i></div> -->
                                                                
                                                                  <ul class="page_nav d-flex flex-row">
                                                                    
                                                                  {% if data.has_previous %}
                                                                  <li><a class="pagination" href="/search2/?key={{key}}&category={{category}}&page={{ data.previous_page_number }}">&lt;</a></li>
                                                                  {% else %}
                                                                  <li ><a class="pagination">&lt;</a></li>
                                                                  {% endif %}
                                                                  
                                                                  {% for i in data.paginator.page_range %}
                                                                  {% if data.number == i %}
                                                                  <li><a class="pagination" class="active">{{ i }}</a></li>
                                                                  {% else %}
                                                                  {% if i == data.paginator.num_pages%}
                                                                    <li><a class="pagination" href="">{{ i }}</a></li>
                                                                  {% else %}
                                                                  {% endif %}
                                                                  {% endif %}
                                                                  {% endfor %}

                                                                  {% if data.has_next %}
                                                                  <li><a class="pagination" href="/search2/?key={{key}}&category={{category}}&page={{ data.next_page_number }}">&gt;</a></li>
                                                                  {% else %}
                                                                  <li><a class="pagination">&gt;</a></li>
                                                                  {% endif %}
                                                                </ul>
                                                            <!-- <div class="page_next d-flex flex-column align-items-center justify-content-center"><i class="fas fa-chevron-right"></i></div> -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Product show end -->
                                    <!-- {% for product in data %}
                                    <a href="/search{%if category_obj%}?category={{category_obj.name}}{%endif%}{%if min_price%}&min_price={{min_price}}{%endif%}{%if max_price%}&max_price={{max_price}}{%endif%}&page=1">&laquo; first</a>
                                            <a href="/search{%if category_obj%}?category={{category_obj.name}}{%endif%}{%if min_price%}&min_price={{min_price}}{%endif%}{%if max_price%}&max_price={{max_price}}{%endif%}&page={{ product.previous_page_number }}">previous</a>
                                            {%endfor%}

                                        <span class="current">
                                            Page {{ data.number }} of {{ data.paginator.num_pages }}.
                                        </span>

                                        {% if data.has_next %}
                                            <a href="/search{%if category_obj%}?category={{category_obj.id}}{%endif%}{%if sub_cat%}?sub_cat={{sub_cat}}{%endif%}{%if min_price%}&min_price={{min_price}}{%endif%}{%if max_price%}&max_price={{max_price}}{%endif%}&page={{ product.next_page_number }}">next</a>
                                            <a href="/search{%if category_obj%}?category={{category_obj.id}}{%endif%}{%if sub_cat%}?sub_cat={{sub_cat}}{%endif%}{%if min_price%}&min_price={{min_price}}{%endif%}{%if max_price%}&max_price={{max_price}}{%endif%}page={{ product.paginator.num_pages }}">last &raquo;</a>
                                        {% endif %} -->
                                        
                                    </span>
                                </div>
                            </ul>
                        </nav>
                        <!-- End Shop Pagination -->
                    </div>
                </div>
                 <!-- Brand Carousel -->
                <!-- <div class="mb-8">
                    <div class="py-2 border-top border-bottom">
                        <div class="js-slick-carousel u-slick my-1"
                            data-slides-show="5"
                            data-slides-scroll="1"
                            data-arrows-classes="d-none d-lg-inline-block u-slick__arrow-normal u-slick__arrow-centered--y"
                            data-arrow-left-classes="fa fa-angle-left u-slick__arrow-classic-inner--left z-index-9"
                            data-arrow-right-classes="fa fa-angle-right u-slick__arrow-classic-inner--right"
                            data-responsive='[{
                                "breakpoint": 992,
                                "settings": {
                                    "slidesToShow": 2
                                }
                            }, {
                                "breakpoint": 768,
                                "settings": {
                                    "slidesToShow": 1
                                }
                            }, {
                                "breakpoint": 554,
                                "settings": {
                                    "slidesToShow": 1
                                }
                            }]'>
                            <div class="js-slide">
                                <a href="#" class="link-hover__brand">
                                    <img class="img-fluid m-auto max-height-50" src="{% static 'assets1/img/200X60/img1.png' %}" alt="Image Description">
                                </a>
                            </div>
                            <div class="js-slide">
                                <a href="#" class="link-hover__brand">
                                    <img class="img-fluid m-auto max-height-50" src="{% static 'assets1/img/200X60/img2.png' %}" alt="Image Description">
                                </a>
                            </div>
                            <div class="js-slide">
                                <a href="#" class="link-hover__brand">
                                    <img class="img-fluid m-auto max-height-50" src="{% static 'assets1/img/200X60/img3.png' %}" alt="Image Description">
                                </a>
                            </div>
                            <div class="js-slide">
                                <a href="#" class="link-hover__brand">
                                    <img class="img-fluid m-auto max-height-50" src="{% static 'assets1/img/200X60/img4.png' %}" alt="Image Description">
                                </a>
                            </div>
                            <div class="js-slide">
                                <a href="#" class="link-hover__brand">
                                    <img class="img-fluid m-auto max-height-50" src="{% static 'assets1/img/200X60/img5.png' %}" alt="Image Description">
                                </a>
                            </div>
                            <div class="js-slide">
                                <a href="#" class="link-hover__brand">
                                    <img class="img-fluid m-auto max-height-50" src="{% static 'assets1/img/200X60/img6.png' %}" alt="Image Description">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>-->
                <!-- End Brand Carousel --> 
            </div>
        </main>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
              $('#min_price','#max_price').keyup(function(){
                console.log('hjhkjjkgjhgjhggh'),
                  $.ajax({
                      type:'GET',
                      url:"/search/",
                      data:{key:$('#min_price','#max_price').val()},
                      
                      
                      success: function(msg){
                          $('#search_results').html(msg);
                      }
                  })
              })
            });
            </script>

<script type="text/javascript">

$(document).ready(function(){
    $('.button-input').click(function(){
    console.log('hhhhhh')

    console.log('hehhhhhhhh')
        flag = '0';
        product_id =$(this).closest(".cart_product").find('#product').val()
        console.log(product_id)
        variant_lt = [];
    //     {% for variant in variants %}
    //     { { variant.variant.name } } = document.getElementsByName('{{variant.variant.name}}');
    //     var {{ variant.variant.name }
    // } _id = 'none';
    // for (i = 0; i < {{ variant.variant.name }}.length; i++) {
    //     if ({{ variant.variant.name }
    // } [i].checked) {
    //     variant_lt.push({{ variant.variant.name }} [i].value);
    // break;
    //     }
    // }
    // {% endfor %}
    quantity_val = document.getElementById('quantity').value;
    console.log(quantity_val)
    document.getElementById('added-cart').style.display = 'block';
    if (flag == '0') {
        $.ajax({
            type: 'POST',
            url: '/user/addtocart',
            
            data: { product: product_id, variants: variant_lt, quantity: quantity_val },
            
            success: function (res_data) {
                if (res_data.response == 'failed2') {
                    console.log(data);
                    document.getElementById('added-cart-text').innerHTML = 'You can only add products from same shop';
                }
                else {
                    if (res_data.response == 'success') {
                        document.getElementById('cart_len_tag').innerHTML = res_data.cart_len.cart_len;

                        //await.sleep(2000);
                        document.getElementById('added-cart').style.display = 'none';
                    }
                    else {
                        document.getElementById('added-cart-text').innerHTML = 'Something went wrong, please try again later';
                    }
                }
            },
            error: function (res) {
                document.getElementById('added-cart-text').innerHTML = 'Something went wrong, please try again later';
            }
        });

        location.reload();

    }
})
})






   
//     async function add_to_cart() {

//         console.log('hehhhhhhhh')
//         flag = '0';
//         product_id =$(this).closest(".cart_product").find('#product').val()
//         console.log(product_id)
//         variant_lt = [];
//     //     {% for variant in variants %}
//     //     { { variant.variant.name } } = document.getElementsByName('{{variant.variant.name}}');
//     //     var {{ variant.variant.name }
//     // } _id = 'none';
//     // for (i = 0; i < {{ variant.variant.name }}.length; i++) {
//     //     if ({{ variant.variant.name }
//     // } [i].checked) {
//     //     variant_lt.push({{ variant.variant.name }} [i].value);
//     // break;
//     //     }
//     // }
//     // {% endfor %}
//     quantity_val = document.getElementById('quantity').value;
//     console.log(quantity_val)
//     document.getElementById('added-cart').style.display = 'block';
//     if (flag == '0') {
//         $.ajax({
//             type: 'POST',
//             url: '/user/addtocart',
            
//             data: { product: product_id, variants: variant_lt, quantity: quantity_val },
            
//             success: function (res_data) {
//                 if (res_data.response == 'failed2') {
//                     console.log(data);
//                     document.getElementById('added-cart-text').innerHTML = 'You can only add products from same shop';
//                 }
//                 else {
//                     if (res_data.response == 'success') {
//                         document.getElementById('cart_len_tag').innerHTML = res_data.cart_len.cart_len;

//                         //await.sleep(2000);
//                         document.getElementById('added-cart').style.display = 'none';
//                     }
//                     else {
//                         document.getElementById('added-cart-text').innerHTML = 'Something went wrong, please try again later';
//                     }
//                 }
//             },
//             error: function (res) {
//                 document.getElementById('added-cart-text').innerHTML = 'Something went wrong, please try again later';
//             }
//         });

        
//     }
// }
</script>












{%endblock%}


